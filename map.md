# FPGA Control & UART Command Map

이 문서는 FPGA 프로젝트의 물리적 버튼/스위치 동작과 UART 시리얼 통신 명령어를 정리한 맵입니다.

## 1. 물리적 제어 (Physical Controls)

### 스위치 (Switches)

보드의 물리적 스위치 설정에 따른 동작 모드입니다.

|    스위치    |        기능 정의        | 상태 0 (OFF)         | 상태 1 (ON)          |
| :-----------: | :---------------------: | :------------------- | :------------------- |
| **SW0** |  **Watch Mode**  | 스톱워치 (Stopwatch) | 시계 (Digital Clock) |
| **SW1** | **Watch Display** | 초:0.01초 (Sec:Cs)   | 시:분 (Hour:Min)     |
| **SW2** | **Display Group** | 시계/스톱워치 화면   | 센서 데이터 화면     |
| **SW3** | **Sensor Select** | 초음파 센서 (SR04)   | 온습도 센서 (DHT11)  |

> **참고**: `SW2`가 0일 때는 `SW3`의 상태가 무시됩니다 (시계 화면 출력).
> `SW2`가 1일 때 `SW3`으로 센서 종류를 선택합니다.

### 버튼 (Buttons)

물리 버튼은 UART 가상 버튼과 **OR 조건**으로 동작합니다.

|       버튼       |      공통 기능      | 시계 모드                  | 스톱워치 모드           | 센서 모드 (SW2=1)                  |
| :--------------: | :-----------------: | :------------------------- | :---------------------- | :--------------------------------- |
| **Center** | **실행/선택** | 시간 설정 모드 진입/해제   | 시작/정지 (Start/Stop)  | **센서 측정 시작** (Trigger) |
|   **Up**   |   **증가**   | 시간/분 증가               | (기능 없음)             | (기능 없음)                        |
|  **Down**  |   **감소**   | 시간/분 감소               | (기능 없음)             | (기능 없음)                        |
|  **Left**  |  **좌이동**  | 설정 자릿수 변경 (시<->분) | (기능 없음)             | (기능 없음)                        |
| **Right** |  **우이동**  | 설정 자릿수 변경 (시<->분) | 랩타임/리셋 (Lap/Reset) | (기능 없음)                        |

---

## 2. UART 시리얼 명령어 (UART Commands)

PC 터미널에서 문자를 전송하여 보드를 제어할 수 있습니다.

### 가상 버튼 (Virtual Buttons)

물리 버튼을 누른 것과 동일한 효과를 냅니다. (대소문자 구분 없음)

|          문자          |   매핑된 버튼   | 설명                                     |
| :--------------------: | :--------------: | :--------------------------------------- |
| **`c`, `C`** | **Center** | 실행, 센서 측정 시작, 스톱워치 시작/정지 |
| **`u`, `U`** |   **Up**   | 값 증가                                  |
| **`d`, `D`** |  **Down**  | 값 감소                                  |
| **`l`, `L`** |  **Left**  | 커서 왼쪽 이동                           |
| **`r`, `R`** | **Right** | 커서 오른쪽 이동, 스톱워치 리셋          |

### 가상 스위치 제어 (Virtual Switches)

물리 스위치 상태를 **반전(Toggle)** 시킵니다.
*(예: 물리 스위치가 OFF(0)일 때 '0'을 보내면 가상으로 ON(1) 상태가 됨)*

|            문자            |  대상 스위치  | 동작                                          |
| :------------------------: | :-----------: | :-------------------------------------------- |
| **`0` 또는 `1`** | **SW0** | Watch Mode (Stopwatch <-> Clock) 전환         |
| **`2` 또는 `3`** | **SW1** | Display Format (Sec:Cs <-> Hour:Min) 전환     |
| **`4` 또는 `5`** | **SW2** | Display Group (Watch <-> Sensor) 전환         |
|      **`6`**      | **SW3** | Sensor Select (SR04 <-> DHT11) 전환           |
|   **`x`, `X`**   | **ALL** | **스위치 초기화** (모든 가상 토글 해제) |

### 데이터 요청 (Data Report Requests)

FPGA에게 현재 상태나 센서 값을 UART로 보내달라고 요청합니다.

|          문자          |      요청 데이터      | 설명                             |
| :--------------------: | :-------------------: | :------------------------------- |
| **`w`, `W`** | **Watch Time** | 현재 시계/스톱워치 시간 값 전송  |
| **`s`, `S`** | **SR04 Value** | 현재 측정된 초음파 거리(cm) 전송 |
| **`t`, `T`** | **Temperature** | DHT11 온도 값 전송               |
| **`h`, `H`** |  **Humidity**  | DHT11 습도 값 전송               |

---

## 3. 동작 예시

### 온습도 측정 시나리오

1. **모드 변경**: `4`를 입력하여 센서 모드로 전환 (SW2 Toggle).
2. **센서 선택**: `6`을 입력하여 DHT11 모드로 전환 (SW3 Toggle).
3. **측정 시작**: `c`를 입력하여 측정 트리거 (Center Button).
4. **데이터 확인**:
   - `t` 입력 -> 온도 값 수신
   - `h` 입력 -> 습도 값 수신

### 시계 모드 시나리오

1. **초기화**: `x`를 입력하여 기본 상태(스톱워치)로 복귀.
2. **시계 모드**: `0`을 입력하여 시계 모드로 전환.
3. **시간 설정**: `c`를 눌러 설정 모드 진입 후 `u`, `d`로 시간 조절.
